% !TEX options=--shell-escape
\documentclass[headings=optiontoheadandtoc,listof=totoc]{scrartcl}

\usepackage{enumitem}
\usepackage[margin=1in]{geometry}
\usepackage[headsepline]{scrlayer-scrpage}
\usepackage[USenglish]{babel}
\usepackage{hyperref}
\usepackage{graphicx}
\usepackage{float}
\usepackage{subcaption}
\usepackage[newfloat]{minted}
\usepackage{xcolor,tcolorbox}
\usepackage{cleveref}

\newenvironment{longlisting}{\captionsetup{type=listing}}{}
\SetupFloatingEnvironment{listing}{listname=Code Listings}

\definecolor{lightgray}{gray}{0.95}

\newmintedfile[cppcode]{c++}{
	linenos,
	firstnumber=1,
	tabsize=2,
	bgcolor=lightgray,
	frame=single,
	breaklines,
	%texcomments % Turned off due to the presence of _ characters in many comments
}

\newmintedfile[plotcode]{gnuplot}{
	linenos,
	firstnumber=1,
	tabsize=2,
	bgcolor=lightgray,
	frame=single,
	breaklines,
}

\DeclareGraphicsRule{.pgm}{eps}{.pgm}{`pgmtops #1}

\pagestyle{scrheadings}
\rohead{Novotny \& Page}
\lohead{CS 474 Programming Assignment 1}

\title{Programming Assignment 1}
\subtitle{CS 474}
\author{Alexander Novotny \and Matthew Lyman Page}

\begin{document}
\maketitle
\tableofcontents

\newpage

\section{Image Sampling}

\section{Image Quantization}

\section{Histogram Equalization}

\subsection{Theory}

\subsection{Implementation}

\subsection{Results and Discussion}
\label{sec:equalization-results}

\begin{figure}[H]
	\centering
	\includegraphics[width=.49\textwidth]{../Images/boat}
	\includegraphics[width=.49\textwidth]{../out/boat-equal}
	\caption{A comparison of \texttt{boat.pgm} with its equalization (right).}
\end{figure}

\begin{figure}[H]
	\centering\includegraphics[width=.7\linewidth]{../out/boat-histogram-plot}
	\caption{A comparison of histograms of \texttt{boat.pgm} and its equalised version}
\end{figure}

\begin{figure}[H]
	\centering
	\includegraphics[width=.49\textwidth]{../Images/f_16}
	\includegraphics[width=.49\textwidth]{../out/f_16-equal}
	\caption{A comparison of \texttt{f\_16.pgm} with its equalization (right).}
\end{figure}

\begin{figure}[H]
	\centering\includegraphics[width=.7\linewidth]{../out/f_16-histogram-plot}
	\caption{A comparison of histograms of \texttt{f\_16.pgm} and its equalised version}
\end{figure}

\section{Histogram Specification}

\begin{figure}[H]
	\centering
	\includegraphics[width=.49\textwidth]{../Images/boat}
	\includegraphics[width=.49\textwidth]{../out/boat-sf-specify}
	\caption{A comparison of \texttt{boat.pgm} with its specification to \texttt{sf.pgm} (right).}
\end{figure}

\begin{figure}[H]
	\centering\includegraphics[width=.7\linewidth]{../out/boat-sf-specified-plot}
	\caption{A comparison of histograms of \texttt{boat.pgm}, \texttt{sf.pgm}, and the specified output above.}
\end{figure}

\clearpage
\listoflistings

\begin{longlisting}
	\caption{Header file for the \texttt{Image} class.}
	\cppcode{../Common/image.h}
\end{longlisting}

\begin{longlisting}
	\caption{Implementation file for the \texttt{Image} class.}
	\cppcode{../Common/image.cpp}
\end{longlisting}

\begin{longlisting}
	\caption{Implementation file for the \texttt{Histogram} supporting library.}
	\cppcode{../Common/histogram_tools.cpp}
\end{longlisting}

\begin{longlisting}
	\caption{Implementation file for the \texttt{equalize} program.}
	\cppcode{../Q3-Equalization/main.cpp}
\end{longlisting}

\begin{longlisting}
	\caption{Implementation file for the \texttt{specify} program.}
	\cppcode{../Q4-Specification/main.cpp}
\end{longlisting}

\begin{longlisting}
	\caption[\texttt{gnuplot} plotting file for generating two-histogram comparison plots.]{\texttt{gnuplot} plotting file for generating two-histogram comparison plots.\\Used for generating comparison plots in \cref{sec:equalization-results}.}
	\plotcode{../Q3-Equalization/plot-histograms.plt}
\end{longlisting}

\begin{longlisting}
	\caption[\texttt{gnuplot} plotting file for generating two-histogram comparison plots.]{\texttt{gnuplot} plotting file for generating two-histogram comparison plots.\\Used for generating comparison plots in \cref{sec:equalization-results}.}
	\plotcode{../Q4-Specification/plot-histograms.plt}
\end{longlisting}

\end{document}